import{r as d,x as k,s as O,o as D,d as C,a as y,t as M,u as l,b as c,B as L,k as $,K as T,c as j,w as B,_ as Y}from"./app-40253c50.js";import{_ as R}from"./AdminLayout-8e9e5df5.js";import{_ as V}from"./ServerIntelServerSelector-92c49f1a.js";import{_ as z,a as H,b as Z}from"./PlayersMinecraftVersionMetricBox-5743e4cc.js";import{_ as A}from"./Chart-bd563aae.js";import{i as P}from"./index.es-e11a7e43.js";import{s as o,e as n,a as g,b as x,c as b,d as I,f as S}from"./index-2d6d430c.js";import"./AppLayout-a080016c.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./useAuthorizable-b0ead891.js";import"./use-resolve-button-type-e9f77412.js";import"./CloudArrowDownIcon-018ac40e.js";import"./index-37b20c98.js";import"./XSelect-36cd7df9.js";const E={class:"bg-white dark:bg-cool-gray-800 rounded w-full h-full space-y-2 p-3 shadow"},q={class:"flex justify-between"},J={class:"font-extrabold text-gray-800 dark:text-gray-200 flex items-center"},N={__name:"PlayersJoinAddressOverTimeMetricBox",props:{servers:{type:Array,required:!1},chartHeight:{type:String,default:"400px"}},setup(i){const f=i,{__:s}=$();let u=d({}),v=d([]),h=d([]),p=d(!0),a=d(null);const _=k(()=>a.value===null||a.value.length<=0||a.value[0]===null||a.value[1]===null);async function m(){p.value=!0;let e={};_.value||(e.from_date=a.value[0],e.to_date=a.value[1]),f.servers&&f.servers.length>0&&(e.servers=f.servers);const t=await T.get(route("admin.graph.player-join-addresses.timeseries",e));p.value=!1,v.value=t.data.data,h.value=t.data.series,u.value={tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},restore:{},saveAsImage:{}}},dataZoom:[{type:"inside",zoomLock:!0},{}],xAxis:{type:"time"},yAxis:{type:"value"},series:h.value.map(r=>({name:r,type:"bar",stack:"total",emphasis:{focus:"series"},datasetIndex:h.value.indexOf(r)})),dataset:v.value}}O(async()=>{await m()});const w=[{text:s("Today"),onClick(){const e=new Date;return[o(e),n(e)]}},{text:s("Yesterday"),onClick(){const e=g(new Date,1);return[o(e),n(e)]}},{text:s("Last 7 Days"),onClick(){const e=new Date,t=g(e,7);return[o(t),n(e)]}},{text:s("Last 30 Days"),onClick(){const e=new Date,t=g(e,30);return[o(t),n(e)]}},{text:s("This Month"),onClick(){const e=new Date,t=x(e);return[o(t),n(e)]}},{text:s("Last Month"),onClick(){const e=new Date,t=x(b(e,1)),r=I(b(e,1));return[o(t),n(r)]}},{text:s("This Year"),onClick(){const e=new Date,t=S(e);return[o(t),n(e)]}}];return(e,t)=>(D(),C("div",E,[y("div",q,[y("h3",J,M(l(s)("Join Addresses over time")),1),c(l(P),{value:l(a),"onUpdate:value":t[0]||(t[0]=r=>L(a)?a.value=r:a=r),type:"date",range:"",placeholder:l(s)("View for date range"),"input-class":"block w-full p-2 text-sm border-gray-300 rounded-md focus:border-light-blue-300 focus:ring focus:ring-light-blue-200 focus:ring-opacity-50 dark:bg-cool-gray-900 dark:text-gray-300 dark:border-gray-900",shortcuts:w,onChange:t[1]||(t[1]=r=>m())},null,8,["value","placeholder"])]),c(A,{options:l(u),height:i.chartHeight,loading:l(p),autoresize:!0},null,8,["options","height","loading"])]))}},U={class:"bg-white dark:bg-cool-gray-800 rounded w-full h-full space-y-2 p-3 shadow"},K={class:"flex justify-between"},F={class:"font-extrabold text-gray-800 dark:text-gray-200 flex items-center"},G={__name:"PlayersMinecraftVersionOverTimeMetricBox",props:{servers:{type:Array,required:!1},chartHeight:{type:String,default:"400px"}},setup(i){const f=i,{__:s}=$();let u=d({}),v=d([]),h=d([]),p=d(!0),a=d(null);const _=k(()=>a.value===null||a.value.length<=0||a.value[0]===null||a.value[1]===null);async function m(){p.value=!0;let e={};_.value||(e.from_date=a.value[0],e.to_date=a.value[1]),f.servers&&f.servers.length>0&&(e.servers=f.servers);const t=await T.get(route("admin.graph.player-minecraft-versions.timeseries",e));p.value=!1,v.value=t.data.data,h.value=t.data.series,u.value={tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},restore:{},saveAsImage:{}}},dataZoom:[{type:"inside",zoomLock:!0},{}],xAxis:{type:"time"},yAxis:{type:"value"},series:h.value.map(r=>({name:r,type:"bar",stack:"total",emphasis:{focus:"series"},datasetIndex:h.value.indexOf(r)})),dataset:v.value}}O(async()=>{await m()});const w=[{text:s("Today"),onClick(){const e=new Date;return[o(e),n(e)]}},{text:s("Yesterday"),onClick(){const e=g(new Date,1);return[o(e),n(e)]}},{text:s("Last 7 Days"),onClick(){const e=new Date,t=g(e,7);return[o(t),n(e)]}},{text:s("Last 30 Days"),onClick(){const e=new Date,t=g(e,30);return[o(t),n(e)]}},{text:s("This Month"),onClick(){const e=new Date,t=x(e);return[o(t),n(e)]}},{text:s("Last Month"),onClick(){const e=new Date,t=x(b(e,1)),r=I(b(e,1));return[o(t),n(r)]}},{text:s("This Year"),onClick(){const e=new Date,t=S(e);return[o(t),n(e)]}}];return(e,t)=>(D(),C("div",U,[y("div",K,[y("h3",F,M(l(s)("Player Client Versions over time")),1),c(l(P),{value:l(a),"onUpdate:value":t[0]||(t[0]=r=>L(a)?a.value=r:a=r),type:"date",range:"",placeholder:l(s)("View for date range"),"input-class":"block w-full p-2 text-sm border-gray-300 rounded-md focus:border-light-blue-300 focus:ring focus:ring-light-blue-200 focus:ring-opacity-50 dark:bg-cool-gray-900 dark:text-gray-300 dark:border-gray-900",shortcuts:w,onChange:t[1]||(t[1]=r=>m())},null,8,["value","placeholder"])]),c(A,{options:l(u),height:i.chartHeight,loading:l(p),autoresize:!0},null,8,["options","height","loading"])]))}},Q={class:"p-4 mx-auto space-y-4 px-10"},W={id:"row1"},X={id:"row2",class:"flex justify-between flex-1 space-x-4"},ee={id:"row3",class:"flex justify-between flex-1 space-x-4"},pe={__name:"Playerbase",props:{serverList:{type:Object},filters:{type:Object}},setup(i){const f=i,s=k(()=>{var u;return route("admin.intel.server.playerbase.countries",{servers:(u=f.filters)==null?void 0:u.servers})});return(u,v)=>(D(),j(R,null,{default:B(()=>[c(Y,{title:u.__("Playerbase - ServerIntel")},null,8,["title"]),y("div",Q,[c(V,{title:u.__("Playerbase"),"server-list":i.serverList,filters:i.filters},null,8,["title","server-list","filters"]),y("div",W,[c(z,{"map-height":"500px","route-name":s.value},null,8,["route-name"])]),y("div",X,[c(N,{"chart-height":"387px",class:"basis-2/3",servers:i.filters.servers},null,8,["servers"]),c(H,{class:"basis-1/3","chart-height":"400px",servers:i.filters.servers},null,8,["servers"])]),y("div",ee,[c(G,{class:"basis-2/3","chart-height":"387px",servers:i.filters.servers},null,8,["servers"]),c(Z,{class:"basis-1/3","chart-height":"400px",servers:i.filters.servers},null,8,["servers"])])])]),_:1}))}};export{pe as default};
